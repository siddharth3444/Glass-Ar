(this["webpackJsonpbasic-virtual-tryon-glasses"]=this["webpackJsonpbasic-virtual-tryon-glasses"]||[]).push([[0],{12:function(e,t,o){e.exports=o(28)},17:function(e,t,o){},18:function(e,t,o){},25:function(e,t){},26:function(e,t){},27:function(e,t){},28:function(e,t,o){"use strict";o.r(t);var n,i,a,r,s,d,c=o(2),l=o.n(c),p=o(8),m=o.n(p),u=(o(17),o(18),o(1)),g=(o(19),o(9)),x=o(11),v=o(10),b=o(0);let f,y;var h;let w,E;function W(e){d=document.getElementById("tryon-video"),h=document.getElementById("threejsContainer"),y=new u.L(50,d.videoWidth/d.videoHeight,1,5e3),y.position.z=d.videoHeight,y.position.x=-d.videoWidth/2,y.position.y=-d.videoHeight/2,(s=new u.Y(d)).minFilter=u.w,E=new u.X(new u.E({map:s,depthWrite:!1,side:u.k})),w=new u.T,w.add(E),E.center.set(.5,.5),E.scale.set(-d.videoWidth,d.videoHeight,1),E.position.copy(y.position),E.position.z=0,function(){var e=new u.M(15658734);e.position.set(10,50,20),w.add(e);var t=new u.a(16742399);w.add(t)}(),function(){const e=new u.r;e.vertices.push(new u.cb(1,0,0)),e.vertices.push(new u.cb(-1,0,0)),e.vertices.push(new u.cb(0,0,1)),e.faces.push(new u.n(0,1,2)),(r=new u.D(e,new u.E({side:u.k}))).visible=!1,w.add(r)}(),(new g.a).load("/basic-virtual-tryon-glasses/obj/facemesh.obj",e=>{e.traverse(e=>{e instanceof u.D&&((a=new u.D(e.geometry,new u.F({side:u.q,color:"blue"}))).material.colorWrite=!1,a.renderOrder=5,w.add(a))})}),function(e){(new x.a).load("/basic-virtual-tryon-glasses/obj/Aviaattorit.fbx",(function(t){(i=t).name=e,i.renderOrder=3,w.add(i)}))}(e),f=new u.gb({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),f.setPixelRatio(window.devicePixelRatio),f.setSize(640,640*d.videoHeight/d.videoWidth),h.appendChild(f.domElement),window.addEventListener("resize",k,!1),S()}function k(){y.aspect=d.videoWidth/d.videoHeight,y.updateProjectionMatrix(),f.setSize(640,640*d.videoHeight/d.videoWidth),f.setClearColor(15658734,1)}function S(){s.needsUpdate=!0,requestAnimationFrame(S),f.render(w,y)}async function j(){const e=await n.estimateFaces(d);if(e.length>0){a.visible=!0,i.visible=!0;for(let t=0;t<e.length;t++){const o=e[t].scaledMesh,n=new u.cb(-o[7][0],-o[7][1],-o[7][2]),s=new u.cb(-o[175][0],-o[175][1],-o[175][2]),d=new u.cb(-o[263][0],-o[263][1],-o[263][2]);r.geometry.vertices[0].copy(s),r.geometry.vertices[1].copy(n),r.geometry.vertices[2].copy(d),r.geometry.verticesNeedUpdate=!0,r.geometry.computeFaceNormals();const c=new u.cb(-o[10][0],-o[10][1],-o[10][2]),l=new u.cb(-o[175][0],-o[175][1],-o[175][2]),p=c.distanceTo(l)/110.5,m=new u.cb(-o[168][0],-o[5][1],-o[10][2]-190),g=new u.cb(-o[168][0],-o[1][1],-o[10][2]-160),x=r.geometry.faces[0].normal.clone();x.transformDirection(r.matrixWorld),x.add(g);const v=r.geometry.faces[0].normal.clone();v.transformDirection(r.matrixWorld),v.add(m),a.position.set(m.x,m.y,m.z),i.position.set(g.x,g.y,g.z),a.lookAt(v),i.lookAt(x);const b=g.x-y.position.x,f=g.y-y.position.y,h=2.8,w=960,E=3.6,W=960;a.position.x+=b/h,i.position.x+=b/h,a.rotation.y+=-b/w,i.rotation.y+=-b/w,a.position.y+=f/E,i.position.y+=f/E,a.rotation.x+=f/W,i.rotation.x+=f/W,i.rotation.x+=.1,Math.abs(i.rotation.y)>.15&&(a.position.z-=40,i.position.z-=40),i.scale.set(8*p,8*p,1.35*p*8);const k=1.1*p;a.scale.set(k,k,k),a.updateWorldMatrix(),i.updateWorldMatrix()}}else i.visible=!1,a.visible=!1;requestAnimationFrame(j)}const z=()=>{Object(c.useEffect)(()=>(async function(){var e=document.getElementById("tryon-video");await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then(t=>{e.srcObject=t}),e.oncanplay=t=>{e.play(),W("purple1"),async function(){await b.Yb("webgl"),n=await v.a({maxFaces:1}),j()}()}}(),()=>{}),[]);const[e,t]=Object(c.useState)("Glasses Try-ON");return l.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #4A90E2, #8B5CF6)",color:"#fff",fontFamily:"Poppins, sans-serif",textAlign:"center"}},l.a.createElement("h1",{style:{fontSize:"50px",fontWeight:"800",color:"#fff",textShadow:"0 0 20px rgba(255, 255, 255, 0.7)",letterSpacing:"2px",marginBottom:"20px"}},"\ud83d\udd76 TouchTry"),l.a.createElement("div",{id:"threejsContainer",style:{width:"80%",maxWidth:"750px",height:"450px",borderRadius:"20px",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"3px solid rgba(255, 255, 255, 0.4)",boxShadow:"0px 4px 20px rgba(255, 255, 255, 0.2)",overflow:"hidden",position:"relative",marginBottom:"30px",display:"flex",alignItems:"center",justifyContent:"center"}},l.a.createElement("video",{id:"tryon-video",style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"20px"},autoPlay:!0,loop:!0,muted:!0})),l.a.createElement("div",{style:{display:"flex",gap:"15px",background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",padding:"15px",borderRadius:"15px",boxShadow:"0px 4px 15px rgba(0, 0, 0, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",overflowX:"auto",whiteSpace:"nowrap",maxWidth:"90%"}},[{name:"Glasses Try-ON",status:"active"},{name:"Watch Try-ON",status:"under-development"},{name:"Bag Try-ON",status:"under-development"},{name:"Jewelry Try-ON",status:"under-development"},{name:"Apparel Try-ON",status:"under-development"}].map((o,n)=>l.a.createElement("div",{key:n,onClick:()=>t(o.name),style:{padding:"12px 20px",fontSize:"18px",fontWeight:"bold",color:"active"===o.status?"rgba(12, 67, 131, 0.8)":"#fff",background:"active"===o.status?"rgba(74, 144, 226, 0.3)":"transparent",borderRadius:"12px",cursor:"pointer",transition:"0.3s ease-in-out",position:"relative",border:e===o.name?"2px solid #4A90E2":"none",boxShadow:e===o.name?"0px 0px 15px rgba(12, 67, 131, 0.8)":"none",display:"flex",alignItems:"center",gap:"10px",whiteSpace:"nowrap"}},o.name,"under-development"===o.status&&l.a.createElement("span",{style:{fontSize:"12px",background:"linear-gradient(90deg, #ff4d4d, #ff6a00)",color:"#fff",padding:"5px 10px",borderRadius:"10px",fontWeight:"bold",boxShadow:"0px 0px 10px rgba(255, 77, 77, 0.8)"}},"Coming Soon \ud83d\ude80")))))};class F extends c.Component{render(){return l.a.createElement("div",{className:"App"},l.a.createElement(z,{onReady:this.ready}))}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(l.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[12,1,2]]]);
//# sourceMappingURL=main.c3c1d336.chunk.js.map